<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezerwacja Obszaru - BeeConnect</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/airbnb.css">

    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/reservation.css">


</head>
<body>
<header class="header">
    <div class="logo-container">
        <div class="logo">
            <a href="home.html">
                <img src="assets/BeeConnect.png" alt="BeeConnect Logo">
            </a>
        </div>
        <div class="page-title">BeeConnect</div>
    </div>
    <div class="header-controls">
        <button class="btn btn-outline back-btn" onclick="goBack()">
            <i class="fas fa-arrow-left"></i> Wróć
        </button>
    </div>
</header>

<div class="reservation-container">
    <div id="loading" class="loading" style="display: none;">
        <i class="fas fa-spinner"></i>
        <p>Ładowanie danych...</p>
    </div>

    <div id="error-container"></div>

    <div class="area-details" id="area-details" style="display: none;">
        <div class="area-header">
            <h1 class="area-title" id="area-name">Ładowanie...</h1>
            <button class="view-details-btn" onclick="showDetailsModal()">
                <i class="fas fa-info-circle"></i> Szczegóły obszaru
            </button>
        </div>

        <div class="area-gallery-container" id="area-gallery-container">
        </div>

        <div class="area-rating-section" id="area-rating-section" style="display: none;">
        </div>

        <div class="area-quick-info">
            <div class="quick-info-item">
                <div class="quick-info-label">Typ</div>
                <div class="quick-info-value" id="area-type-quick">-</div>
            </div>
            <div class="quick-info-item">
                <div class="quick-info-label">Powierzchnia</div>
                <div class="quick-info-value" id="area-size-quick">-</div>
            </div>
            <div class="quick-info-item">
                <div class="quick-info-label">Max uli</div>
                <div class="quick-info-value" id="area-hives-quick">-</div>
            </div>
            <div class="quick-info-item">
                <div class="quick-info-label">Cena/dzień</div>
                <div class="quick-info-value" id="area-price-quick">-</div>
            </div>
        </div>
    </div>

    <div class="reservation-form" id="reservation-form-container" style="display: none;">
        <h2 class="reservation-form-title">Rezerwacja obszaru</h2>
        <p class="reservation-form-description">
            <i class="fas fa-info-circle" style="color: var(--primary);"></i> Wybierz dostępne daty z kalendarza.
            <span style="color: #d32f2f; font-weight: 600;">Czerwone, przekreślone dni</span> są już zajęte przez innych pszczelarzy.
        </p>

        <div class="user-balance">
            <span class="balance-label">Twoje saldo:</span>
            <span class="balance-value" id="user-balance">0.00 PLN</span>
        </div>

        <form id="reservation-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="start-date">Data od: *</label>
                    <input type="text" id="start-date" name="start-date" placeholder="Wybierz datę" required readonly>
                    <small>Wybierz datę rozpoczęcia wynajmu</small>
                </div>

                <div class="form-group">
                    <label for="end-date">Data do: *</label>
                    <input type="text" id="end-date" name="end-date" placeholder="Wybierz datę" required readonly>
                    <small>Wybierz datę zakończenia wynajmu</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="hives-count">Liczba uli: *</label>
                    <input type="number" id="hives-count" name="hives-count" min="1" value="1" required>
                    <small>Podaj liczbę uli (maksymalnie <span id="max-hives-hint">-</span>)</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="reservation-notes">Uwagi (opcjonalne):</label>
                    <textarea id="reservation-notes" name="notes" placeholder="Dodatkowe informacje dla właściciela..."></textarea>
                </div>
            </div>

            <div class="reservation-summary">
                <h3 class="summary-title">Podsumowanie rezerwacji</h3>

                <div class="summary-item">
                    <div class="summary-item-label">Wybrany okres:</div>
                    <div class="summary-item-value"><span id="summary-date-range">-</span> (<span id="summary-days">0</span> dni)</div>
                </div>

                <div class="summary-item">
                    <div class="summary-item-label">Liczba uli:</div>
                    <div class="summary-item-value"><span id="summary-hives">0</span> uli</div>
                </div>

                <div class="summary-item">
                    <div class="summary-item-label">Cena za dzień:</div>
                    <div class="summary-item-value"><span id="summary-daily">0</span> PLN</div>
                </div>

                <div class="summary-total">
                    <div class="summary-total-label">Całkowity koszt:</div>
                    <div class="summary-total-value"><span id="summary-total">0</span> PLN</div>
                </div>

                <div id="insufficient-balance-warning" class="insufficient-balance" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    Niewystarczające saldo! Potrzebujesz doładować konto o <strong><span id="missing-amount">0</span> PLN</strong>.
                </div>
            </div>

            <div class="reservation-actions">
                <button type="button" class="btn btn-outline back-btn" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i> Anuluj
                </button>

                <button type="submit" class="btn btn-primary submit-reservation-btn" id="submit-btn" disabled>
                    <i class="fas fa-calendar-check"></i> Zarezerwuj obszar
                </button>
            </div>
        </form>
    </div>
</div>

<div class="area-tabs" id="area-tabs-section" style="display: none;">
    <div class="tabs-header">
        <button class="tab-button active" data-tab="reviews">
            Opinie (<span id="reviews-count-tab">0</span>)
        </button>
    </div>
    <div class="tabs-content">
        <div class="tab-pane active" id="reviews-tab">
            <div id="reviews-container">
            </div>
        </div>
    </div>
</div>

<div id="details-modal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-info-circle"></i>
                Szczegóły obszaru
            </div>
            <button class="modal-close" onclick="closeDetailsModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="details-grid">
                <div class="details-item">
                    <div class="details-label">Nazwa obszaru</div>
                    <div class="details-value" id="detail-name">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Typ roślinności</div>
                    <div class="details-value" id="detail-type">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Powierzchnia</div>
                    <div class="details-value" id="detail-size">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Maksymalna liczba uli</div>
                    <div class="details-value" id="detail-hives">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Cena za dzień</div>
                    <div class="details-value" id="detail-price">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Właściciel</div>
                    <div class="details-value" id="detail-owner">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Dostępny od</div>
                    <div class="details-value" id="detail-available">-</div>
                </div>
                <div class="details-item">
                    <div class="details-label">Opis</div>
                    <div class="details-value" id="detail-description">-</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="confirmation-modal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-exclamation-circle" style="color: #ff9800;"></i>
                Potwierdź rezerwację
            </div>
            <button class="modal-close" onclick="closeConfirmationModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="modal-warning">
                <i class="fas fa-info-circle"></i>
                <div class="modal-warning-text">
                    <div class="modal-warning-title">Czy na pewno chcesz zarezerwować ten obszar?</div>
                    <div class="modal-warning-desc">Środki zostaną natychmiast pobrane z Twojego konta.</div>
                </div>
            </div>

            <div class="modal-section">
                <div class="modal-section-title">Szczegóły rezerwacji</div>
                <div class="modal-info-grid">
                    <div class="modal-info-row">
                        <span class="modal-info-label">Obszar:</span>
                        <span class="modal-info-value" id="modal-area-name">-</span>
                    </div>
                    <div class="modal-info-row">
                        <span class="modal-info-label">Okres:</span>
                        <span class="modal-info-value" id="modal-date-range">-</span>
                    </div>
                    <div class="modal-info-row">
                        <span class="modal-info-label">Liczba dni:</span>
                        <span class="modal-info-value" id="modal-days">-</span>
                    </div>
                    <div class="modal-info-row">
                        <span class="modal-info-label">Liczba uli:</span>
                        <span class="modal-info-value" id="modal-hives">-</span>
                    </div>
                    <div class="modal-info-row">
                        <span class="modal-info-label">Cena za dzień:</span>
                        <span class="modal-info-value" id="modal-daily-price">-</span>
                    </div>
                </div>
            </div>

            <div class="modal-cost-summary">
                <div class="modal-cost-label">Całkowity koszt rezerwacji:</div>
                <div class="modal-cost-value"><span id="modal-total-price">0</span> PLN</div>
            </div>
        </div>
        <div class="modal-actions">
            <button class="modal-btn modal-btn-cancel" onclick="closeConfirmationModal()">
                <i class="fas fa-times"></i> Nie, wróć
            </button>
            <button class="modal-btn modal-btn-confirm" onclick="confirmReservation()">
                <i class="fas fa-check"></i> Tak, rezerwuj ostatecznie
            </button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/pl.js"></script>
<script src="scripts/reservation.js"></script>


</body>
</html>